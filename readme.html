<html>
<head>
	<title></title>
</head>
<body class="scayt-disabled">
<p><em>VelodyneOdo</em> - определение перемещения робота по данным дальномера Veloodyne&nbsp;</p>

<p>Определение положения каждого нового скана осуществляется относительно опорного скана пока это возможно (пока есть перекрытие между опорным сканом и текущим сканом). Опорный скан заносится в трехмерную карту в виде силового поля.&nbsp;Положение каждого следующего скана определяется относительно полученного силового поля, как положения, в которое&nbsp;новый скан перемещается под действием сил, приложенных к его точкам. Предварительно скан (опорный и текущий) фильтруются (sparse_first, sparse_next), чтобы уменьшить количество вычислений.</p>

<p>&nbsp;Текущий скан добавляется в карту, если не выполняются условия определения положения (превышена дистанция,&nbsp;время или число точек в перекрытии).&nbsp;</p>

<p>Данная версия может требовать для работы большого объема памяти (RAM) Объем определяется дискретностью карты и её размерами&nbsp;</p>

<p><strong>velodyne_odo_node</strong> - однопоточная версия&nbsp;</p>

<p><strong>velodyne_odo_node_mt</strong> - двупоточная версия (второй поток служит для очистки и подготовки карты, требует&nbsp;в 2 раза больше оперативной памяти)&nbsp;</p>

<p>Узел одписывается на топики&nbsp;</p>

<p><em>point_cloud</em> - облако точек дальномера, PointCloud2&nbsp;</p>

<p>/<em>tf</em> - необходимо преобразование СК (tf) от платформы (имя задается в параметре base_frame) до дальномера (определяется сообщением дальномера)&nbsp;</p>

<p><strong>Параметры:&nbsp;</strong></p>

<p><em>~Xmax, ~Ymax,</em> метр - размеры трехмерной&nbsp;карты относительно СК лазерного дальномера (+-), по умолчанию 40&nbsp;</p>

<p><em>~Zmax, ~Zmin, </em>метр - размер карты по высоте</p>

<p>&nbsp;<em>~minRad,</em> метр - ограничения на входные данные, по умолчанию 5&nbsp;</p>

<p><em>~sparse_first</em>, метр - параметр разряжения входного облака, которое помещается в карту, как опорное, по умолчанию 0.5&nbsp;</p>

<p><em>~sparse_next</em>, метр - разряжения следующих облаков, по умолчанию, 0.5&nbsp;</p>

<p><em>~cell_size</em>, метр - дискретность карты, по умолчанию 0.2&nbsp;</p>

<p><em>~sph_size</em>, метр - размер силового поля (радиус сферы), которое помещается для каждой точик опорного скана в карту ( по умолчанию 1 )&nbsp;</p>

<p><em>~registration_distance</em>, метр - макисмальная дистанция, после прохождения которой обновляется карта опорным сканом ( по умолчанию 8)</p>

<p>&nbsp;<em>~registration_time</em>, секунд - максимальное время, через которое обновляется карта опорным сканом ( по умолчанию 30)</p>

<p><em>~max_dis</em>, метров -&nbsp;начальный шаг выравнивания скана, по умолчанию&nbsp;0.005</p>

<p><em>~max_rot</em>, радиан&nbsp;- начальный шаг выравнивания скана по углу, 0.001</p>

<p><em>~min_dis,</em> метров - конечная величина поступательного шага, по умолчанию&nbsp;&nbsp;0.0001</p>

<p><em>~min_rot</em>, радиан - конечная величина шага по углу, по умолчанию&nbsp;0.0001</p>

<p><em>~max_iterations</em>, - макисмальное число итераций при поиске положения скана относительно опроного, по умолчанию&nbsp;&nbsp;200</p>

<p><em>~max_alignment_iterations</em> - число итераций, после которого происходит создание нового опорного скана, по умолчанию&nbsp;60</p>

<p>~<em>active_point_percent</em> - минимальное число точек, участвующих в определении положения нового скана, при уменьшении ниже данного предела, происходит обновление опорного скана&nbsp;</p>

<p><em>~max_overcount</em> - число выравниваний скана по старой карте, после изменения опорного скана, по умолчанию 5</p>

<p><em>~odo_frame</em> - имя СК (frame_id) относительно которой определяется положение base_frame, по умолчанию&nbsp;&nbsp;&quot;odom&quot;</p>

<p><em>~transform_pointcloud</em> - переводить публикуемые облака точек в СК odo_frame, по умолчанию false</p>

<p><em>~base_frame</em> - имя СК робота, по умолчанию&nbsp;base_link</p>

<p>~rays - число лучей в нормализованном скане, по умолчанию 360</p>

<p><strong>Публикуемые топики</strong></p>

<p>~<em>normalized_cloud</em> &nbsp;- облако точек, в котром устранены эффекты, вызванные движением робота.&nbsp;если установлен (=true) флаг&nbsp;<em>transform_pointcloud</em> - облако переводится в СК <em>odo_frame</em>, иначе публикуется в CК дальномера (как исходное)</p>

<p>~<em>odo</em> - одометрия по данным дальномера</p>

<p>/<em>tf</em> - преобразование от odo_frame до base_frame</p>
</body>
</html>
